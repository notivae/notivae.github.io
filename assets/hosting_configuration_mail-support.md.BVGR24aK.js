import{_ as i,c as a,o as e,ag as t}from"./chunks/framework.Bw-5EFTY.js";const c=JSON.parse('{"title":"📧 Mail Support (Optional)","description":"","frontmatter":{},"headers":[],"relativePath":"hosting/configuration/mail-support.md","filePath":"en/hosting/configuration/mail-support.md","lastUpdated":1752224413000}'),l={name:"hosting/configuration/mail-support.md"};function n(p,s,h,o,d,r){return e(),a("div",null,s[0]||(s[0]=[t(`<h1 id="📧-mail-support-optional" tabindex="-1">📧 Mail Support (Optional) <a class="header-anchor" href="#📧-mail-support-optional" aria-label="Permalink to &quot;📧 Mail Support (Optional)&quot;">​</a></h1><p>The mail service is <strong>optional</strong>, but highly recommended if you want to enable features like:</p><ul><li>Email verification for user signups</li><li>Notification systems (e.g., for comment threads)</li><li>Error notifications sent to administrators</li><li>Admin approval mails for account creation if <code>APP_ACCOUNT_CREATION=restricted</code></li><li>Password reset flows</li><li>Other user or admin-triggered messages</li></ul><p>If not configured, these features will silently degrade or fallback to no-ops.</p><h2 id="prerequisites" tabindex="-1">Prerequisites <a class="header-anchor" href="#prerequisites" aria-label="Permalink to &quot;Prerequisites&quot;">​</a></h2><ol><li>Access to a working SMTP server (e.g., Gmail, Mailgun, SendGrid, your own).</li><li>A valid sender email address and credentials (if required).</li></ol><h2 id="environment-variables" tabindex="-1">Environment Variables <a class="header-anchor" href="#environment-variables" aria-label="Permalink to &quot;Environment Variables&quot;">​</a></h2><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-Ij2dV" id="tab-IkiwtEw" checked><label data-title=".env" for="tab-IkiwtEw">.env</label></div><div class="blocks"><div class="language-dotenv vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">dotenv</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">MAIL_SERVER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">MAIL_PORT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">MAIL_USE_CREDENTIALS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">true</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">MAIL_USERNAME</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">MAIL_PASSWORD</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">MAIL_FROM</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">MAIL_USE_TLS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">false</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">MAIL_START_TLS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">MAIL_VALIDATE_CERTS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">true</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">MAIL_TEMPLATES_DIR</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span></span></code></pre></div></div></div><table tabindex="0"><thead><tr><th>Variable</th><th>Description</th></tr></thead><tbody><tr><td><code>MAIL_SERVER</code></td><td>SMTP server hostname or IP address (e.g., <code>smtp.gmail.com</code>)</td></tr><tr><td><code>MAIL_PORT</code></td><td>SMTP port. Defaults: <code>465</code> if <code>MAIL_USE_TLS=true</code>, <code>587</code> if <code>MAIL_START_TLS=true</code>, else <code>25</code></td></tr><tr><td><code>MAIL_USE_CREDENTIALS</code></td><td>Whether to authenticate using <code>MAIL_USERNAME</code> and <code>MAIL_PASSWORD</code></td></tr><tr><td><code>MAIL_USERNAME</code></td><td>Username for SMTP login</td></tr><tr><td><code>MAIL_PASSWORD</code></td><td>Password (or app password) for SMTP login</td></tr><tr><td><code>MAIL_FROM</code></td><td>Email address or <code>&quot;Name &lt;email@example.com&gt;&quot;</code> to use in the <code>From</code> header</td></tr><tr><td><code>MAIL_USE_TLS</code></td><td>If <code>true</code>, use TLS immediately on connect. Mutually exclusive with <code>MAIL_START_TLS</code></td></tr><tr><td><code>MAIL_START_TLS</code></td><td>If <code>true</code>, upgrade to TLS via STARTTLS after connecting. Overrides server STARTTLS support check</td></tr><tr><td><code>MAIL_VALIDATE_CERTS</code></td><td>Whether to validate server certificates</td></tr><tr><td><code>MAIL_TEMPLATES_DIR</code></td><td>Optional directory path to custom jinja email templates</td></tr></tbody></table><details class="details custom-block"><summary>TLS vs STARTTLS</summary><p>SMTP supports two common encryption modes:</p><ul><li>TLS (SMTPS): Encrypts the connection from the beginning (use port 465)</li><li>STARTTLS: Starts unencrypted, then upgrades to TLS via the STARTTLS command (use port 587)</li></ul><p>Set only one of the following:</p><ul><li>MAIL_USE_TLS=true: use SMTPS over port 465 (implicit TLS)</li><li>MAIL_START_TLS=true: use SMTP with STARTTLS over port 587 (explicit TLS)</li><li>Set both to false: use unencrypted SMTP, typically on port 25 (for internal or development servers)</li></ul><p>Do not enable both TLS and STARTTLS.</p></details><h2 id="example-configurations" tabindex="-1">Example Configurations <a class="header-anchor" href="#example-configurations" aria-label="Permalink to &quot;Example Configurations&quot;">​</a></h2><h3 id="gmail-app-passwords" tabindex="-1">Gmail (App Passwords) <a class="header-anchor" href="#gmail-app-passwords" aria-label="Permalink to &quot;Gmail (App Passwords)&quot;">​</a></h3><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-EdWs3" id="tab-q2eFVJK" checked><label data-title=".env" for="tab-q2eFVJK">.env</label></div><div class="blocks"><div class="language-dotenv vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">dotenv</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">MAIL_SERVER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">smtp.gmail.com</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">MAIL_PORT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">465</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">MAIL_USE_CREDENTIALS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">true</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">MAIL_USERNAME</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">notivae@gmail.com</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">MAIL_PASSWORD</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">your_app_password</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">MAIL_FROM</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Notivae &lt;notivae@gmail.com&gt;&quot;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">MAIL_USE_TLS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">true</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">MAIL_VALIDATE_CERTS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">true</span></span></code></pre></div></div></div><h3 id="mailgun" tabindex="-1">Mailgun <a class="header-anchor" href="#mailgun" aria-label="Permalink to &quot;Mailgun&quot;">​</a></h3><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-_icB6" id="tab-0D2hIjK" checked><label data-title=".env" for="tab-0D2hIjK">.env</label></div><div class="blocks"><div class="language-dotenv vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">dotenv</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">MAIL_SERVER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">smtp.mailgun.org</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">MAIL_PORT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">587</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">MAIL_USE_CREDENTIALS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">true</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">MAIL_USERNAME</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">notivae@sandbox123.mailgun.org</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">MAIL_PASSWORD</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">your_mailgun_password</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">MAIL_FROM</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Notivae &lt;notivae@sandbox123.mailgun.org&gt;&quot;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">MAIL_START_TLS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">true</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">MAIL_VALIDATE_CERTS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">true</span></span></code></pre></div></div></div><h3 id="localhost-no-auth-no-tls" tabindex="-1">Localhost (No Auth, No TLS) <a class="header-anchor" href="#localhost-no-auth-no-tls" aria-label="Permalink to &quot;Localhost (No Auth, No TLS)&quot;">​</a></h3><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-XgvRq" id="tab-LAERTcB" checked><label data-title=".env" for="tab-LAERTcB">.env</label></div><div class="blocks"><div class="language-dotenv vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">dotenv</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">MAIL_SERVER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">localhost</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">MAIL_PORT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">25</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">MAIL_USE_CREDENTIALS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">false</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">MAIL_FROM</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Notivae &lt;notivae@example.com&gt;&quot;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">MAIL_USE_TLS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">false</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">MAIL_START_TLS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">false</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">MAIL_VALIDATE_CERTS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">false</span></span></code></pre></div></div></div><h2 id="optional-email-templates" tabindex="-1">Optional: Email Templates <a class="header-anchor" href="#optional-email-templates" aria-label="Permalink to &quot;Optional: Email Templates&quot;">​</a></h2><p>The mail system comes with built-in HTML templates rendered using <strong>Jinja2</strong>.<br> To override any of them, you can mount a custom template directory and set:</p><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-z6Wdv" id="tab-SUzGDiJ" checked><label data-title=".env" for="tab-SUzGDiJ">.env</label></div><div class="blocks"><div class="language-dotenv vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">dotenv</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">MAIL_TEMPLATES_DIR</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/templates/emails</span></span></code></pre></div></div></div><p>Each custom template file must match the filename (and extension) of the default it&#39;s replacing. The expected extension is: <strong><code>.html.j2</code></strong></p><p>Modify you <code>docker-compose.yml</code> to mount your templates and set the environment variable.</p><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-NCKNZ" id="tab-u-QOs-J" checked><label data-title="docker-compose.yml" for="tab-u-QOs-J">docker-compose.yml</label></div><div class="blocks"><div class="language-yaml vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">services</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ghcr.io/notivae/server</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    ...</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    environment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      MAIL_TEMPLATES_DIR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/templates/emails</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    volumes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">./my-custom-templates:/templates/emails:ro</span></span></code></pre></div></div></div><p>This will override any built-in template that has a matching <code>.html.j2</code> file in <code>./my-custom-templates</code>.</p><div class="warning custom-block"><p class="custom-block-title">⚠️ Important Notes</p><ul><li><p>Only override templates you fully understand</p></li><li><p>Do <strong>not</strong> attempt to create custom mail templates unless you are comfortable with:</p><ul><li>Jinja2 syntax and escaping</li><li>HTML for email clients (tables, inline styles, etc.)</li><li>Required template filenames (e.g., <code>verify_email.html.j2</code>, <code>reset_password.html.j2</code>)</li><li>The variables available inside each template (not documented)</li></ul></li><li><p>Missing or broken templates won&#39;t fall back to the default built-in ones</p></li></ul></div><h2 id="additional-notes" tabindex="-1">Additional Notes <a class="header-anchor" href="#additional-notes" aria-label="Permalink to &quot;Additional Notes&quot;">​</a></h2><ul><li><code>MAIL_FROM</code> supports both plain email addresses and <code>&quot;Name &lt;email@example.com&gt;&quot;</code> formats.</li><li>If you&#39;re using 2FA on your email account (e.g., Gmail), you&#39;ll need an <a href="https://support.google.com/accounts/answer/185833" target="_blank" rel="noreferrer">App Password</a>.</li><li>Some SMTP servers require you to enable &quot;less secure apps&quot; or explicitly enable SMTP access.</li></ul>`,27)]))}const E=i(l,[["render",n]]);export{c as __pageData,E as default};
