import{_ as a,c as e,o as i,ag as n}from"./chunks/framework.Bw-5EFTY.js";const u=JSON.parse('{"title":"🛡️ Virus Scanning (Optional)","description":"","frontmatter":{},"headers":[],"relativePath":"hosting/configuration/virus-scanning-support.md","filePath":"en/hosting/configuration/virus-scanning-support.md","lastUpdated":1752140028000}'),t={name:"hosting/configuration/virus-scanning-support.md"};function r(l,s,o,p,c,h){return i(),e("div",null,s[0]||(s[0]=[n(`<h1 id="🛡️-virus-scanning-optional" tabindex="-1">🛡️ Virus Scanning (Optional) <a class="header-anchor" href="#🛡️-virus-scanning-optional" aria-label="Permalink to &quot;🛡️ Virus Scanning (Optional)&quot;">​</a></h1><p>Notivae supports <strong>optional virus scanning</strong> for uploaded files. This feature is designed to improve security in environments where users can upload arbitrary attachments — especially in multi-user or publicly accessible deployments.</p><h2 id="✅-overview" tabindex="-1">✅ Overview <a class="header-anchor" href="#✅-overview" aria-label="Permalink to &quot;✅ Overview&quot;">​</a></h2><p>Virus scanning is <strong>disabled by default</strong> and only activates if the following two environment variables are set:</p><div class="language-env vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">env</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>CLAMAV_HOST=&lt;host&gt;</span></span>
<span class="line"><span>CLAMAV_PORT=&lt;port&gt;</span></span></code></pre></div><p>When both are defined, Notivae will attempt to connect to the ClamAV service. If the connection fails at runtime while virus scanning is enabled, <strong>file uploads will be rejected</strong> for safety.</p><h2 id="🔧-when-to-enable-virus-scanning" tabindex="-1">🔧 When to Enable Virus Scanning <a class="header-anchor" href="#🔧-when-to-enable-virus-scanning" aria-label="Permalink to &quot;🔧 When to Enable Virus Scanning&quot;">​</a></h2><p>You should enable virus scanning when:</p><ul><li>Notivae is hosted on a <strong>public-facing server</strong></li><li>You allow <strong>guest access via shared links</strong></li><li>You&#39;re running Notivae in an <strong>enterprise or shared environment</strong></li><li>You want defense against <strong>known malware or trojan file uploads</strong></li></ul><p>It’s typically <strong>not necessary</strong> for:</p><ul><li>Local, private deployments</li><li>Environments where all users are trusted</li></ul><h2 id="🔍-how-it-works" tabindex="-1">🔍 How It Works <a class="header-anchor" href="#🔍-how-it-works" aria-label="Permalink to &quot;🔍 How It Works&quot;">​</a></h2><p>When enabled:</p><ul><li>Uploaded attachments are streamed to disk</li><li>Once stored, the file is scanned using the ClamAV service</li><li>If a threat is detected, the file is immediately deleted and the upload fails with an error</li><li>Clean files proceed as normal</li></ul><h2 id="🐳-docker-compose-setup" tabindex="-1">🐳 Docker Compose Setup <a class="header-anchor" href="#🐳-docker-compose-setup" aria-label="Permalink to &quot;🐳 Docker Compose Setup&quot;">​</a></h2><p>To enable virus scanning, add the ClamAV service to your <code>docker-compose.yml</code>:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">services</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  clamav</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">clamav/clamav:stable_base</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    restart</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">unless-stopped</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    volumes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">clamav-db:/var/lib/clamav</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # persists virus signature database</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">volumes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  clamav-db</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span></code></pre></div><p>This image automatically checks for virus database updates <strong>once per day</strong>.</p><h2 id="⚠️-resource-requirements" tabindex="-1">⚠️ Resource Requirements <a class="header-anchor" href="#⚠️-resource-requirements" aria-label="Permalink to &quot;⚠️ Resource Requirements&quot;">​</a></h2><p>ClamAV requires a <strong>significant amount of RAM</strong> to function properly. According to official documentation:</p><ul><li>Minimum recommended: <strong>3 GB RAM</strong></li><li>Optimal: <strong>4 GB+ RAM</strong>, depending on signature database and traffic</li></ul><p>You should not enable virus scanning on hosts with limited memory or swap space unless you&#39;re confident in available resources.</p><h2 id="🧪-testing-virus-scanning" tabindex="-1">🧪 Testing Virus Scanning <a class="header-anchor" href="#🧪-testing-virus-scanning" aria-label="Permalink to &quot;🧪 Testing Virus Scanning&quot;">​</a></h2><p>To verify that virus scanning is active and working, you can use the <strong>EICAR test file</strong>, a harmless file designed to trigger antivirus systems.</p><p>Download or create it using the official test string: <a href="https://www.eicar.org/download-anti-malware-testfile/" target="_blank" rel="noreferrer">https://www.eicar.org/download-anti-malware-testfile/</a></p><p>Upload this file to Notivae. If scanning is active, it will be rejected with a message like:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Virus detected: Eicar-Test-Signature</span></span></code></pre></div><p>This confirms that your scanner integration is functional.</p>`,28)]))}const g=a(t,[["render",r]]);export{u as __pageData,g as default};
